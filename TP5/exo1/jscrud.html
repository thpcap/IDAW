<!doctype html>
<html lang="fr">
    <head>
        <meta charset='utf-8'>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script src="https://code.jquery.com/jquery-3.4.1.min.js" crossorigin="anonymous"></script>
        <title>tabletest</title>
        <style>
            body{
                margin-top: 5em;
            }
            .table {
                margin-top: 100px;
                margin-bottom: 100px;
                border: 1px solid black;
            }
            .table>thead>tr>th{
                border: 1px solid black;
            }
            .table>tbody>tr>td{
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <form class="UpdateStudentForm" onsubmit="onUpdateFormSubmit();"></form>
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Nom</th>
                        <th scope="col">Prenom</th>
                        <th scope="col">Date de naissance</th>
                        <th scope="col">Aime le cours Web</th>
                        <th scope="col">Remarques</th>
                        <th scope="col">CRUD</th>
                    </tr>
                </thead>
                <tbody id="studentsTableBody">
                    
                </tbody>
            </table>
        </form>
        <form id="addStudentForm" action="" onsubmit="onCreateFormSubmit();">
            <div class="form-group row">
                <label for="inputNom" class="col-sm-2 col-form-label">Nom</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" id="inputNom" >
                </div>
                <label for="inputPrenom" class="col-sm-2 col-form-label">Pr√©nom</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" id="inputPrenom" >
                </div>
                <label for="inputDate" class="col-sm-2 col-form-label">Date de naissance</label>
                <div class="col-sm-3">
                    <input type="date" class="form-control" id="inputDate" >
                </div>
                <label for="AimeLeCoursDeWeb" class="col-sm-2 col-form-label">Aime Le Cours De Web?</label>
                <div class="col-sm-3">
                    <input type="checkbox" class="form-control" id="AimeLeCoursDeWeb" checked>
                </div>
                <label for="Remarques" class="col-sm-2 col-form-label">Remarques</label>
                <div class="col-sm-3">
                    <input type="text" class="form-control" id="Remarques">
                </div>
            </div>
            <div class="form-group row">
                <span class="col-sm-2"></span>
                <div class="col-sm-2">
                    <button type="submit" class="btn btn-primary form-control">Submit</button>
                </div>
                <div class="col-sm-2">
                    <input type="reset" value="Reset">
                </div>
               
            </div>
        </form>
        <script>
            $(document).ready(function(){
                var id=0;
                function onCreateFormSubmit() {
                    // prevent the form to be sent to the server
                    event.preventDefault();
                    let nom = $("#inputNom").val();
                    let prenom = $("#inputPrenom").val();
                    let date = $("#inputDate").val();
                    let AimeLeCoursDeWeb = $("#AimeLeCoursDeWeb").is(':checked');
                    let remarques = $("#Remarques").val();

                    //TODO requete ajax pour envoyer les student

                    $("#studentsTableBody").append(`
                        <tr id="student${id}">\n
                            <td id="nom${id}">${nom}</td>\n
                            <td id="prenom${id}">${prenom}</td>\n
                            <td id="date${id}">${date}</td>\n
                            <td id="AimeLeCoursDeWeb${id}">${AimeLeCoursDeWeb}</td>\n
                            <td id="remarques${id}">${remarques}</td>\n
                            <td>\n
                                <form class="deleteStudentForm" onsubmit="onDeleteFormSubmit();">\n
                                    <input type="hidden" name="id" value="${id}">\n
                                    <input type="submit" value="delete">\n
                                </form>\n
                            </td>\n
                            <td>\n
                                <form class="ModifyStudentForm" onsubmit="onModifyButtonSubmit();">\n
                                    <input type="hidden" name="id" value="${id}">\n
                                    <input type="submit" value="Modify">\n
                                </form>\n
                            </td>\n
                        </tr>
                    `);
                    id++;
                }
                
                function onDeleteFormSubmit() {
                    // prevent the form to be sent to the server
                    event.preventDefault();
                    let stdid=$("input[name='id']").val();
                    $("#student"+stdid).remove();
                }

                function onModifyButtonSubmit(){
                    // prevent the form to be sent to the server
                    event.preventDefault();
                    let id=$("input[name='id']").val();
                    let nom = $("#nom"+id).val();
                    let prenom = $("#prenom"+id).val();
                    let date = $("#date"+id).val();
                    let AimeLeCoursDeWeb = $("#AimeLeCoursDeWeb"+id).val();
                    if(AimeLeCoursDeWeb=="true"){
                        AimeLeCoursDeWeb="checked";
                    }else{
                        AimeLeCoursDeWeb="";
                    }
                    let remarques = $("#remarques"+id).val();
                    let data=`
                                
                                    <td><input type="text" class="form-control" id="inputNom2" value="${nom}"></td>\n
                                    <td><input type="text" class="form-control" id="inputPrenom2" value="${prenom}"></td>\n
                                    <td><input type="date" class="form-control" id="inputDate2" value="${date}"></td>\n
                                    <td><input type="checkbox" class="form-control" id="AimeLeCoursDeWeb2" ${AimeLeCoursDeWeb}></td>\n
                                    <td><input type="text" class="form-control" id="Remarques2" value="${remarques}"></td>\n
                                    <td>\n
                                        <form id="deleteStudentForm" onsubmit="onDeleteFormSubmit();">\n
                                            <input type="hidden" name="id" value="${id}">\n
                                            <input type="submit" value="delete">\n
                                        </form>\n
                                    </td>\n
                                    <td>\n
                                        <input type="hidden" name="id" value="${id}">\n
                                        <input type="submit" value="Update">\n
                                    </td>\n
                                `;
                    $("#student"+id).empty();   
                    $("#student"+id).append(data);
                }
                
                function onUpdateFormSubmit(){
                    // prevent the form to be sent to the server
                    event.preventDefault();
                    let nom = $("#inputNom2").val();
                    let prenom = $("#inputPrenom2").val();
                    let date = $("#inputDate2").val();
                    let AimeLeCoursDeWeb = $("#AimeLeCoursDeWeb2").is(':checked');
                    let remarques = $("#Remarques2").val();

                }

            });
            

        </script>
    </body>
</html>